import{u as M}from"./list-3fcef5d8.js";import{M as N}from"./Modal-6af97a3c.js";import{d as x,u as S,j as g,r as V,e as _,k as F,o as d,c,a as e,w as $,t as h,f as B,g as C,v as k,b as A,l as D,F as L,s as T,m as y,n as w,q as U,p as j,i as E,_ as R}from"./index-a4f8bda1.js";const q={id:"creatListForm"},O={class:"container"},Y={class:"card card-body mt-4 mb-4"},z=["id","onSubmit"],G={key:0,class:"error-message text-danger mb-4"},H={class:"form-group"},J=e("label",{for:"listName"},"List name",-1),K=x({__name:"CreateListForm",props:{validateForm:{type:Boolean},formId:{},modalIsVisible:{type:Boolean}},emits:["closeModal"],setup(a,{emit:i}){const t=a,p=M(),f=S(),v=g(()=>f.user),r=V({listName:"",userId:v.value.id}),m=_("");F(()=>t.validateForm,async()=>{t.validateForm&&t.modalIsVisible?await u():i("closeModal",!1)});async function u(){console.log("SUBMIT is trigger from CreateListForm"),await p.createList(r).then(n=>{r.listName="",i("closeModal",!0)}).catch(n=>{console.log(n.message)})}return(n,s)=>(d(),c("div",q,[e("div",O,[e("div",Y,[e("form",{ref:"form",id:t.formId,onSubmit:$(u,["prevent"])},[m.value?(d(),c("p",G,h(m.value),1)):B("",!0),e("div",H,[J,C(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>r.listName=l),type:"text",class:"form-control",id:"listName",placeholder:"list name"},null,512),[[k,r.listName]])])],40,z)])])]))}}),b=a=>(j("data-v-89cf8aee"),a=a(),E(),a),Q={class:"list-group"},W=b(()=>e("div",{class:"list-group-item active d-flex align-items-center justify-content-between p-2 gap-4"},[e("div",null," Your lists of Movies ")],-1)),X=b(()=>e("button",{type:"button",class:"list-group-item list-group-item-primary","data-bs-toggle":"modal","data-bs-target":"#addList"}," + Add List ",-1)),Z=["href"],P={class:"ms-2 me-auto"},ee={class:""},te={class:"badge bg-primary rounded-pill"},se=b(()=>e("span",{class:"ms-2"},">",-1)),oe=x({__name:"ListView",setup(a){const i=M(),t=_(!1);A();const p=g(()=>i.list),f=_(p),v=g(()=>i.movie),r=_(v);function m(s){return r.value.filter(l=>l.listId===s).length}async function u(){await i.getList()}D(async()=>{await u()});const n=s=>`/list/${s}`;return(s,l)=>(d(),c(L,null,[e("div",Q,[W,X,(d(!0),c(L,null,T(f.value,o=>(d(),c("a",{href:n(o.id),class:"list-group-item list-group-item-action d-flex align-items-start","aria-current":"true",key:o.id},[e("div",P,[e("div",ee,h(o.listName),1)]),e("span",te,h(m(o.id)),1),se],8,Z))),128))]),y(N,{"close-modal":t.value,"modal-id":"addList"},{title:w(()=>[U(" Add New List ")]),body:w(o=>[y(K,{"validate-form":o.validateForm,"modal-is-visible":o.modalIsVisible,"form-id":"addList",onCloseModal:l[0]||(l[0]=I=>t.value=I)},null,8,["validate-form","modal-is-visible"])]),_:1},8,["close-modal"])],64))}});const le=R(oe,[["__scopeId","data-v-89cf8aee"]]);export{le as default};
